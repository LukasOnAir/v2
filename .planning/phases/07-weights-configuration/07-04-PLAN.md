---
phase: 07-weights-configuration
plan: 04
type: execute
wave: 3
depends_on: ["07-02", "07-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can set weight multipliers per taxonomy level (L1-L5)"
    - "Weights apply to Matrix weighted average calculations"
    - "Weights apply to Sunburst weighted average calculations"
    - "Default weights are 1.0 (equal weighting)"
    - "Weight configuration persists across sessions"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete weights configuration feature.

Purpose: Confirm all Phase 7 success criteria are met through manual testing.
Output: Verified working weights configuration affecting Matrix and Sunburst visualizations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-weights-configuration/07-CONTEXT.md
@.planning/phases/07-weights-configuration/07-01-SUMMARY.md
@.planning/phases/07-weights-configuration/07-02-SUMMARY.md
@.planning/phases/07-weights-configuration/07-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete weights configuration feature with UI and visualization integration</what-built>
  <how-to-verify>
**Test 1: Weight UI visibility and interaction**
1. Navigate to Taxonomy page
2. Look for weight toggle button (Scale icon) in toolbar
3. Click toggle - should show:
   - Level Weights bar above tree with L1-L5 badges
   - Weight badge on each tree node
4. Verify badges show "1.0x" (default)

**Test 2: Level default weight editing**
1. With weights visible, click an L2 badge in Level Weights bar
2. Change value to 2.0, press Enter
3. Verify all L2 nodes now show "2.0x" (unless they have overrides)
4. Check both Risk and Process tabs have independent weights

**Test 3: Per-node override**
1. Click a specific node's weight badge
2. Change to 3.0, press Enter
3. Verify badge shows accent color (indicating override)
4. Verify X button appears next to override value
5. Click X - badge should revert to level default

**Test 4: Matrix integration**
1. Navigate to Matrix page
2. Note the cell colors
3. Return to Taxonomy page, change L1 risk weight to 0.5
4. Return to Matrix - aggregated scores should change (colors may shift)

**Test 5: Sunburst integration**
1. Navigate to Sunburst page
2. Note the segment colors
3. Return to Taxonomy page, change a level weight
4. Return to Sunburst - segment colors should reflect new weights

**Test 6: Persistence**
1. Set some custom weights (level defaults and node overrides)
2. Refresh the browser
3. Navigate to Taxonomy page, show weights
4. Verify all custom weights persisted

**Test 7: Permission gating**
1. Switch to Control Owner role (via role picker)
2. Navigate to Taxonomy page, show weights
3. Verify weight badges are disabled (cannot edit)
4. Switch back to Risk Manager - should be editable again

**Expected Results:**
- All weight UI elements function correctly
- Level defaults affect all nodes at that level
- Node overrides are visually distinct and clearable
- Matrix and Sunburst update when weights change
- Weights persist across page refresh
- Only Risk Manager can edit weights
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human confirmation that:
- Weight configuration UI is intuitive and functional
- Matrix and Sunburst respond to weight changes
- Persistence works correctly
- Permission gating is enforced
</verification>

<success_criteria>
All Phase 7 roadmap success criteria verified:
1. User can set weight multipliers per taxonomy level (L1-L5) - verified
2. Weights apply to Matrix weighted average calculations - verified
3. Weights apply to Sunburst weighted average calculations - verified
4. Default weights are 1.0 (equal weighting) - verified
5. Weight configuration persists across sessions - verified
</success_criteria>

<output>
After completion, create `.planning/phases/07-weights-configuration/07-04-SUMMARY.md`
</output>
