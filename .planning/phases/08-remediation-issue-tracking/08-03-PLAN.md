---
phase: 08-remediation-issue-tracking
plan: 03
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - src/components/remediation/RemediationDashboard.tsx
  - src/components/remediation/RemediationSummary.tsx
  - src/components/remediation/RemediationTable.tsx
  - src/components/remediation/OverdueWidget.tsx
  - src/components/remediation/UpcomingWidget.tsx
  - src/components/remediation/index.ts
  - src/pages/RemediationPage.tsx
  - src/App.tsx
  - src/components/layout/Sidebar.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to /remediation dashboard page"
    - "Dashboard shows summary statistics (by status, by priority)"
    - "Dashboard shows overdue remediation items"
    - "Dashboard shows upcoming deadlines (next 7 days)"
    - "User can see remediation details with linked risk context"
  artifacts:
    - path: "src/pages/RemediationPage.tsx"
      provides: "Dashboard page route"
      min_lines: 20
    - path: "src/components/remediation/RemediationDashboard.tsx"
      provides: "Dashboard layout with widgets"
      min_lines: 50
    - path: "src/components/remediation/OverdueWidget.tsx"
      provides: "Overdue items widget"
      min_lines: 40
    - path: "src/components/remediation/UpcomingWidget.tsx"
      provides: "Upcoming deadlines widget"
      min_lines: 40
    - path: "src/App.tsx"
      provides: "Route definition for /remediation"
      contains: "remediation"
    - path: "src/components/layout/Sidebar.tsx"
      provides: "Navigation link to remediation"
      contains: "Remediation"
  key_links:
    - from: "src/pages/RemediationPage.tsx"
      to: "src/components/remediation/RemediationDashboard.tsx"
      via: "component import"
      pattern: "import.*RemediationDashboard"
    - from: "src/components/remediation/RemediationDashboard.tsx"
      to: "src/stores/rctStore.ts"
      via: "useRCTStore hook"
      pattern: "useRCTStore"
    - from: "src/App.tsx"
      to: "src/pages/RemediationPage.tsx"
      via: "route definition"
      pattern: "RemediationPage"
---

<objective>
Create remediation dashboard page with summary statistics and overdue/upcoming widgets

Purpose: Provide organization-wide visibility into remediation status, overdue items, and upcoming deadlines
Output: New /remediation route with dashboard showing summary stats, overdue items, and upcoming deadlines
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-remediation-issue-tracking/08-RESEARCH.md
@.planning/phases/08-remediation-issue-tracking/08-01-SUMMARY.md
@src/App.tsx
@src/components/layout/Sidebar.tsx
@src/pages/SunburstPage.tsx
@src/pages/MatrixPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard components</name>
  <files>
    src/components/remediation/RemediationSummary.tsx
    src/components/remediation/OverdueWidget.tsx
    src/components/remediation/UpcomingWidget.tsx
    src/components/remediation/RemediationTable.tsx
    src/components/remediation/RemediationDashboard.tsx
    src/components/remediation/index.ts
  </files>
  <action>
Create the src/components/remediation/ directory with the following components:

1. **RemediationSummary.tsx** - Summary statistics widget
   - Grid of stat cards showing:
     - Total active (open + in-progress)
     - By status (open, in-progress, resolved, closed)
     - By priority (critical, high, medium, low) - only show non-closed
   - Use colored backgrounds for priority (same colors as badges in RemediationSection)
   - Layout: responsive grid, cards with rounded borders

2. **OverdueWidget.tsx** - Overdue items widget
   - Header with red styling "Overdue Items (N)"
   - If no overdue: show green "No overdue items" message
   - List of overdue items showing:
     - Title
     - Risk name (from row lookup)
     - Owner
     - Days overdue (use date-fns differenceInDays)
   - Each item clickable (for now, just show info - navigation will come in future)
   - Max height with scroll for many items
   - Red border when items exist

3. **UpcomingWidget.tsx** - Upcoming deadlines widget (next 7 days)
   - Header "Upcoming Deadlines (N)"
   - List of items with deadline in next 7 days (not overdue)
   - Show: title, owner, days until deadline
   - Amber border styling
   - Max height with scroll

4. **RemediationTable.tsx** - Full list table
   - TanStack Table with all remediation plans
   - Columns: Title, Status, Priority, Owner, Deadline, Risk Name, Actions
   - Status badge, Priority badge
   - Sortable columns
   - Simple table (no virtualization needed - typically < 100 items)

5. **RemediationDashboard.tsx** - Main dashboard layout
   - Page header "Remediation Dashboard"
   - Top row: RemediationSummary
   - Middle row: OverdueWidget + UpcomingWidget (2-column grid)
   - Bottom: RemediationTable with "All Remediation Plans" header

6. **index.ts** - Exports
   ```typescript
   export { RemediationDashboard } from './RemediationDashboard'
   export { RemediationSummary } from './RemediationSummary'
   export { RemediationTable } from './RemediationTable'
   export { OverdueWidget } from './OverdueWidget'
   export { UpcomingWidget } from './UpcomingWidget'
   ```

Use custom hook pattern from research for summary calculations:
```typescript
function useRemediationSummary() {
  const remediationPlans = useRCTStore(state => state.remediationPlans)
  const rows = useRCTStore(state => state.rows)

  return useMemo(() => {
    const today = startOfDay(new Date())
    // ... calculate byStatus, overdue, upcoming, byPriority
  }, [remediationPlans, rows])
}
```

Style consistently with existing pages (MatrixPage, SunburstPage) - dark theme, surface backgrounds, amber accents.
  </action>
  <verify>`npm run build` compiles without errors</verify>
  <done>All remediation dashboard components exist and compile correctly</done>
</task>

<task type="auto">
  <name>Task 2: Create RemediationPage and integrate routing</name>
  <files>
    src/pages/RemediationPage.tsx
    src/App.tsx
    src/components/layout/Sidebar.tsx
  </files>
  <action>
1. **Create src/pages/RemediationPage.tsx:**
   ```typescript
   import { RemediationDashboard } from '@/components/remediation'

   export function RemediationPage() {
     return <RemediationDashboard />
   }
   ```

2. **Update src/App.tsx:**
   - Add import: `import { RemediationPage } from './pages/RemediationPage'`
   - Add route inside the Layout route:
     ```typescript
     <Route path="remediation" element={<RemediationPage />} />
     ```
   - Add after existing routes (taxonomy, rct, matrix, sunburst)

3. **Update src/components/layout/Sidebar.tsx:**
   - Add import for ClipboardList icon from lucide-react (already has Folders, Table, etc.)
   - Add new nav item to navItems array:
     ```typescript
     { to: '/remediation', icon: ClipboardList, label: 'Remediation' },
     ```
   - Position after Sunburst (last item before the collapse toggle)

The sidebar icon should be ClipboardList (matches the remediation/issue tracking concept).
  </action>
  <verify>
1. `npm run build` compiles without errors
2. Run `npm run dev`
3. Click "Remediation" in sidebar - should navigate to /remediation
4. Dashboard page renders with summary, overdue, upcoming, and table sections
  </verify>
  <done>RemediationPage is accessible at /remediation via sidebar navigation, shows dashboard with all widgets</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. /remediation route is accessible via sidebar
3. Dashboard shows summary statistics
4. Overdue widget shows items past deadline
5. Upcoming widget shows items due in next 7 days
6. Table shows all remediation plans with sorting
</verification>

<success_criteria>
- Remediation dashboard page accessible at /remediation
- Sidebar has "Remediation" navigation item with ClipboardList icon
- Summary shows counts by status and priority
- Overdue items widget highlights items past deadline
- Upcoming widget shows items due within 7 days
- Table displays all remediation plans with status/priority badges
</success_criteria>

<output>
After completion, create `.planning/phases/08-remediation-issue-tracking/08-03-SUMMARY.md`
</output>
