---
phase: 14-delta-scores
plan: 03
type: execute
wave: 2
depends_on: ["14-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All four view modes display correctly"
    - "Delta colors scale dynamically based on data"
    - "Gray segments have tooltip explanations"
    - "Feature works end-to-end as specified"
  artifacts: []
  key_links: []
---

<objective>
Human verification of the complete Delta Scores feature.

Purpose: Ensure the feature works correctly from an end-user perspective before marking phase complete.

Output: Verified working feature or list of issues to address.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-delta-scores/14-CONTEXT.md
@.planning/phases/14-delta-scores/14-01-SUMMARY.md
@.planning/phases/14-delta-scores/14-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Delta Scores feature for Sunburst chart with four view modes:
1. Net Score - current default showing aggregated net risk scores
2. Gross Score - aggregated gross risk scores (inherent risk)
3. Delta (Gross-Net) - control effectiveness (how much risk was reduced)
4. Delta (vs Appetite) - distance from risk appetite threshold

Features include:
- Four-option toggle in toolbar
- Dynamic color scaling for delta views
- Gray segments for missing data
- Informative tooltips explaining missing data
- Updated legend showing dynamic scale
  </what-built>
  <how-to-verify>
1. Start the dev server: `npm run dev`
2. Navigate to the Sunburst page

**Test Net Score view (default):**
3. Verify chart displays with colored segments based on net scores
4. Verify legend shows "Low (1)" to "High (25)" scale

**Test Gross Score view:**
5. Click "Gross Score" in the View toggle
6. Verify colors update to reflect gross scores
7. Verify legend remains the same (1-25 scale)

**Test Delta (G-N) view:**
8. Click "Delta (G-N)" in the View toggle
9. Verify colors change to reflect delta values (control effectiveness)
10. Verify legend shows dynamic scale: "Low (0)" to "High ({maxDelta})"
11. Verify some segments may turn gray if missing gross or net score
12. Hover over a gray segment - verify tooltip shows explanation like "No net score (no controls)"

**Test Delta (vs App) view:**
13. Click "Delta (vs App)" in the View toggle
14. Verify colors change to reflect distance from appetite
15. Verify legend shows appropriate scale
16. Verify gray segments for rows without risk appetite set
17. Hover over gray segment - verify tooltip explains "No risk appetite set"

**Test persistence:**
18. Refresh the page
19. Verify the selected view mode is preserved

**Test edge cases:**
20. If all segments are gray in a delta view, verify legend shows "No delta data" message
21. Verify clicking segments still navigates/zooms correctly
22. Verify right-click "View in RCT" still works
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human confirms all view modes work correctly
</verification>

<success_criteria>
- All four view modes display correctly
- Delta color scales are dynamic (not fixed 1-25)
- Gray segments appear for missing data with tooltip explanations
- View mode persists across page refresh
- Existing functionality (zoom, navigation, export) still works
</success_criteria>

<output>
After completion, create `.planning/phases/14-delta-scores/14-03-SUMMARY.md`
</output>
