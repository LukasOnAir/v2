---
phase: 18-login-page
plan: 02
type: execute
wave: 2
depends_on: ["18-01"]
files_modified:
  - src/pages/LoginPage.tsx
  - src/App.tsx
  - src/components/layout/Header.tsx
autonomous: false

must_haves:
  truths:
    - "Login page displays with visually impressive dark theme design"
    - "Form fields animate in with staggered entrance"
    - "Button has smooth hover and tap animations"
    - "Demo credentials (demo/demo) work and navigate to main app"
    - "Invalid credentials show error feedback"
    - "User can logout from header"
  artifacts:
    - path: "src/pages/LoginPage.tsx"
      provides: "Animated login page component"
      exports: ["LoginPage"]
      min_lines: 100
    - path: "src/App.tsx"
      provides: "LoginPage imported and used in route"
      contains: "LoginPage"
  key_links:
    - from: "src/pages/LoginPage.tsx"
      to: "motion/react"
      via: "animation imports"
      pattern: "from 'motion/react'"
    - from: "src/pages/LoginPage.tsx"
      to: "src/stores/uiStore.ts"
      via: "login action"
      pattern: "useUIStore.*login"
    - from: "src/pages/LoginPage.tsx"
      to: "react-router"
      via: "navigation after login"
      pattern: "useNavigate|Navigate"
---

<objective>
Create eye-catching animated login page for Holland Casino demo

Purpose: Build visually impressive login interface with smooth Motion animations that serves as demo entry point
Output: Fully animated LoginPage.tsx with dark theme, staggered form animations, and demo credential support
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/18-login-page/18-RESEARCH.md
@.planning/phases/18-login-page/18-01-SUMMARY.md

# Existing files for reference
@src/stores/uiStore.ts
@src/App.tsx
@src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LoginPage with Motion animations</name>
  <files>src/pages/LoginPage.tsx</files>
  <action>
Create src/pages/LoginPage.tsx with these features:

**Layout:**
- Full-screen dark background (bg-surface-base)
- Centered card with subtle elevation (bg-surface-elevated)
- "RiskGuard ERM" branding text with accent-500 color
- Optional: subtle gradient or animated background particles for visual interest

**Form elements:**
- Username input field with Lock icon
- Password input field with Eye/EyeOff toggle for visibility
- "Sign In" button with accent-500 background
- Demo credentials hint box (amber/accent tinted background)

**Animations (using motion/react):**
1. Page enter: fade in + slide up (opacity: 0->1, y: 20->0, duration: 0.5s)
2. Form fields: staggered entrance (staggerChildren: 0.1)
3. Button: whileHover scale 1.02, whileTap scale 0.98
4. Input focus: subtle scale/border color animation
5. Error message: AnimatePresence for enter/exit

**Functionality:**
- useState for username, password, error, isLoading
- On submit: call uiStore.login(username, password)
- If login returns true: navigate to '/' (or state.from if available)
- If login returns false: show "Invalid credentials" error with animation
- Brief loading state (setTimeout 500ms) for visual feedback

**Code patterns from research:**
```typescript
import { motion, AnimatePresence } from 'motion/react'
import { useState } from 'react'
import { useNavigate, useLocation } from 'react-router'
import { useUIStore } from '@/stores/uiStore'
import { Lock, User, Eye, EyeOff, Loader2 } from 'lucide-react'

const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { staggerChildren: 0.1 }
  }
}

const itemVariants = {
  hidden: { opacity: 0, y: 20 },
  visible: { opacity: 1, y: 0 }
}
```

**Styling:**
- Use existing Tailwind theme colors: bg-surface-base, bg-surface-elevated, text-text-primary, text-accent-500, border-surface-border
- Card: rounded-xl, shadow-xl (or shadow-2xl for drama)
- Inputs: focus:ring-2 focus:ring-accent-500
- Error text: text-red-400
  </action>
  <verify>
    - File exists at src/pages/LoginPage.tsx
    - TypeScript compiles: `npx tsc --noEmit`
    - No import errors from motion/react
  </verify>
  <done>LoginPage.tsx created with full Motion animations: page entrance, staggered form fields, button hover/tap effects, and error animations.</done>
</task>

<task type="auto">
  <name>Task 2: Update App.tsx to use real LoginPage</name>
  <files>src/App.tsx</files>
  <action>
Update src/App.tsx:

1. Remove the placeholder LoginPage function component

2. Add import for LoginPage:
   ```typescript
   import { LoginPage } from './pages/LoginPage'
   ```

3. Keep the route structure from Plan 01:
   ```typescript
   <Route path="login" element={<LoginPage />} />
   ```

The route is already outside the ProtectedRoute wrapper from Plan 01, just update the import to use the real component.
  </action>
  <verify>
    - App compiles: `npm run build`
    - No duplicate LoginPage definitions
  </verify>
  <done>App.tsx imports and uses the real LoginPage component instead of placeholder.</done>
</task>

<task type="auto">
  <name>Task 3: Add logout button to Header</name>
  <files>src/components/layout/Header.tsx</files>
  <action>
Update Header.tsx to add logout functionality:

1. Import useNavigate from 'react-router'
2. Import LogOut icon from 'lucide-react'
3. Get logout action from useUIStore

4. Add logout button next to role selector (or in appropriate location):
   - LogOut icon
   - On click: call logout() then navigate to '/login'
   - Tooltip or title="Logout"
   - Style consistent with other header actions

5. Only show logout if isAuthenticated (defensive, but user should always be authenticated when seeing Header since it's inside protected routes)

Button style pattern (matching existing header buttons):
```typescript
<button
  onClick={() => { logout(); navigate('/login') }}
  className="p-2 rounded-lg hover:bg-surface-elevated text-text-secondary hover:text-text-primary transition-colors"
  title="Logout"
>
  <LogOut className="w-5 h-5" />
</button>
```
  </action>
  <verify>
    - Header shows logout button
    - Clicking logout redirects to /login
    - User is logged out (can't access protected routes without logging in again)
  </verify>
  <done>Header has logout button that calls logout() and navigates to /login, styled consistently with existing header actions.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete login page with Motion animations and logout functionality</what-built>
  <how-to-verify>
1. Run `npm run dev` and open http://localhost:5173
2. Should redirect to /login automatically (unauthenticated)
3. Observe login page:
   - Dark theme with amber/orange accents
   - "RiskGuard ERM" branding
   - Animated entrance (form slides in, fields stagger)
   - Demo credentials hint box visible
4. Test form interactions:
   - Hover over "Sign In" button - should scale slightly
   - Click/tap button - should scale down briefly
   - Focus on inputs - should have smooth border/focus animation
5. Test invalid login:
   - Enter wrong credentials (e.g., test/test)
   - Click Sign In
   - Error message should animate in
6. Test valid login:
   - Enter demo/demo
   - Click Sign In
   - Should show brief loading state
   - Should navigate to main app (/taxonomy)
7. Test logout:
   - In header, find logout button (LogOut icon)
   - Click it
   - Should redirect back to /login
8. Test persistence:
   - Log in with demo/demo
   - Refresh the page
   - Should stay logged in (not redirect to login)
  </how-to-verify>
  <resume-signal>Type "approved" if animations are smooth and login flow works, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Login page renders with all animated elements
3. Demo credentials (demo/demo) authenticate and redirect to main app
4. Invalid credentials show animated error
5. Logout button in header works and redirects to login
6. Auth state persists across refresh
7. Animations are smooth (no jank or layout shift)
</verification>

<success_criteria>
1. Login page is visually impressive (dark theme, animated, branded)
2. Form has staggered entrance animation
3. Button has hover/tap animations
4. Demo credentials work (demo/demo)
5. Invalid credentials show error with animation
6. Successful login navigates to main app
7. Logout from header works
8. Auth persists across browser refresh
9. Interface is eye-catching for Holland Casino demo
</success_criteria>

<output>
After completion, create `.planning/phases/18-login-page/18-02-SUMMARY.md`
</output>
