---
phase: 29-demo-tenant-seed-data
plan: 02
subsystem: database
tags: [sql, seed-data, taxonomy, process-hierarchy, supabase]

# Dependency graph
requires:
  - phase: 26-shared-tenant-database
    provides: taxonomy_nodes table with hierarchical_id trigger
  - phase: 29-01
    provides: demo tenant UUID and seed-scripts directory pattern
provides:
  - Process taxonomy seed SQL script (56 nodes, L1-L5 hierarchy)
  - Generic business process categories for demo tenant
affects: [29-03, 29-04, 29-05, demo-showcase]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - DO block with variable declarations for parent ID references
    - RETURNING INTO for capturing generated UUIDs
    - Clean slate DELETE before INSERT pattern

key-files:
  created:
    - supabase/seed-scripts/29-02-process-taxonomy.sql
  modified: []

key-decisions:
  - "6 L1 categories covering generic business operations (not industry-specific)"
  - "Selective L3 children to keep total within 55-65 range"
  - "2 deep branches (L4/L5) for hierarchy depth showcase"

patterns-established:
  - "Process taxonomy SQL follows same pattern as risk taxonomy for consistency"

# Metrics
duration: 8min
completed: 2026-01-27
---

# Phase 29 Plan 02: Process Taxonomy Summary

**Generic business process taxonomy with 56 nodes across 5 levels (L1-L5) for demo tenant showcase**

## Performance

- **Duration:** 8 min
- **Started:** 2026-01-27T19:13:16Z
- **Completed:** 2026-01-27T19:21:33Z
- **Tasks:** 1
- **Files created:** 1

## Accomplishments
- Created comprehensive process taxonomy seed SQL script
- 6 L1 categories: Core Operations, Sales & Marketing, Support Functions, Procurement, Management, Compliance & Risk
- 21 L2 subcategories covering all major business function areas
- 23 L3 process types for operational detail
- 2 L4 nodes and 4 L5 nodes demonstrating deep hierarchy (Financial Reporting and Manufacturing branches)
- Total 56 nodes within target range of 55-65

## Task Commits

Each task was committed atomically:

1. **Task 1: Create process taxonomy seed SQL script** - `f3d3ceb` (feat)

## Files Created/Modified
- `supabase/seed-scripts/29-02-process-taxonomy.sql` - Process taxonomy seed SQL with DO block, variable declarations, and hierarchical inserts

## Decisions Made
- **6 L1 categories**: Core Operations, Sales & Marketing, Support Functions, Procurement, Management, Compliance & Risk - covers generic business operations without being industry-specific
- **Selective L3 coverage**: Not all L2s have L3 children to keep total within 55-65 target range while still demonstrating hierarchy depth
- **2 deep branches**: Financial Reporting (L3) -> Regulatory Filings (L4) -> Annual Report/Quarterly Filings (L5) and Manufacturing (L3) -> Assembly (L4) -> Sub-Assembly/Final Assembly (L5)
- **Clean slate approach**: DELETE existing process nodes before INSERT ensures idempotent execution

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - SQL script created following established pattern from previous phase documentation.

## User Setup Required

**Manual execution required.** The SQL script must be executed in Supabase SQL Editor:
1. Open Supabase Dashboard > SQL Editor
2. Paste contents of `supabase/seed-scripts/29-02-process-taxonomy.sql`
3. Execute the script
4. Verify with: `SELECT COUNT(*) FROM taxonomy_nodes WHERE tenant_id = '5ea03edb-6e79-4b62-bd36-39f1963d0640' AND type = 'process'` (should return 56)

## Next Phase Readiness
- Process taxonomy ready for demo tenant
- Risk taxonomy (29-01) and process taxonomy (29-02) complete
- Ready for 29-03: Controls seed data
- hierarchical_id will be auto-generated by database trigger when executed

---
*Phase: 29-demo-tenant-seed-data*
*Completed: 2026-01-27*
