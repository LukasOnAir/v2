---
phase: 34-tickets-dashboard-enhancements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/stores/uiStore.ts
  - src/components/tickets/TicketsSummary.tsx
autonomous: true

must_haves:
  truths:
    - "User can click section headers to expand/collapse Status, Priority, Category sections"
    - "Status section is visible by default on page load"
    - "Priority and Category sections are collapsed by default on page load"
    - "Active tickets count and Overdue count are always visible at top"
    - "Collapse preferences persist across browser sessions"
  artifacts:
    - path: "src/stores/uiStore.ts"
      provides: "ticketsSummary visibility state with persistence"
      contains: "showStatusStats"
    - path: "src/components/tickets/TicketsSummary.tsx"
      provides: "Collapsible statistics sections with toggle icons"
      contains: "ChevronDown"
  key_links:
    - from: "src/components/tickets/TicketsSummary.tsx"
      to: "src/stores/uiStore.ts"
      via: "useUIStore hook"
      pattern: "useUIStore.*showStatusStats"
---

<objective>
Add collapsible sections to TicketsSummary component for Status, Priority, and Category statistics.

Purpose: Users can declutter the Tickets Dashboard by hiding statistics they don't need, while keeping Active/Overdue counts always visible for quick status checks.

Output: TicketsSummary with clickable section headers that expand/collapse, preferences persisted to localStorage via uiStore.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/stores/uiStore.ts
@src/components/tickets/TicketsSummary.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add tickets summary visibility state to uiStore</name>
  <files>src/stores/uiStore.ts</files>
  <action>
Add three boolean state properties and their toggle functions to UIState interface and implementation:

1. Add to interface:
```typescript
// Tickets Summary section visibility
showStatusStats: boolean
showPriorityStats: boolean
showCategoryStats: boolean
toggleStatusStats: () => void
togglePriorityStats: () => void
toggleCategoryStats: () => void
```

2. Add to implementation with defaults:
- showStatusStats: true (visible by default per SC-2)
- showPriorityStats: false (hidden by default per SC-2)
- showCategoryStats: false (hidden by default per SC-2)

3. Add toggle functions that flip the corresponding boolean:
```typescript
toggleStatusStats: () => set((state) => ({ showStatusStats: !state.showStatusStats })),
togglePriorityStats: () => set((state) => ({ showPriorityStats: !state.showPriorityStats })),
toggleCategoryStats: () => set((state) => ({ showCategoryStats: !state.showCategoryStats })),
```

The uiStore already uses persist middleware with localStorage, so these values will automatically persist.
  </action>
  <verify>TypeScript compiles without errors: `npm run build`</verify>
  <done>uiStore exports showStatusStats/showPriorityStats/showCategoryStats with defaults (true/false/false) and toggle functions, all persisted to localStorage</done>
</task>

<task type="auto">
  <name>Task 2: Add collapsible sections to TicketsSummary</name>
  <files>src/components/tickets/TicketsSummary.tsx</files>
  <action>
1. Import ChevronDown, ChevronUp from lucide-react

2. Import useUIStore from '@/stores/uiStore'

3. At top of component, destructure visibility state and toggles:
```typescript
const {
  showStatusStats,
  showPriorityStats,
  showCategoryStats,
  toggleStatusStats,
  togglePriorityStats,
  toggleCategoryStats,
} = useUIStore()
```

4. Replace static section headers with clickable toggle buttons:

For "By Status" section (around line 131-143):
```tsx
<div>
  <button
    type="button"
    onClick={toggleStatusStats}
    className="flex items-center gap-2 text-sm font-medium text-text-muted mb-2 hover:text-text-secondary transition-colors"
  >
    {showStatusStats ? <ChevronDown size={16} /> : <ChevronRight size={16} />}
    By Status
  </button>
  {showStatusStats && (
    <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
      {/* existing status cards */}
    </div>
  )}
</div>
```

Apply same pattern to "Active by Priority" section (showPriorityStats, togglePriorityStats) and "By Category" section (showCategoryStats, toggleCategoryStats).

5. Also import ChevronRight from lucide-react for collapsed state indicator.

6. Top row with Active Tickets and Overdue counts remains unchanged (always visible per SC-3).
  </action>
  <verify>
1. Run `npm run build` - no TypeScript errors
2. Manual test: Visit /tickets page, verify:
   - Active and Overdue counts always visible at top
   - Status section visible with down chevron
   - Priority section collapsed with right chevron
   - Category section collapsed with right chevron
   - Clicking headers toggles visibility
   - Refresh page, check preferences persisted
  </verify>
  <done>TicketsSummary sections are collapsible, Status visible by default, Priority/Category hidden by default, Active/Overdue always visible</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Visit /tickets page
3. Verify Active Tickets and Overdue counts visible at top (never hidden)
4. Verify Status section visible with ChevronDown icon
5. Verify Priority section collapsed with ChevronRight icon
6. Verify Category section collapsed with ChevronRight icon
7. Click each section header - toggles expand/collapse
8. Refresh page - collapse states persist
9. Clear localStorage, refresh - defaults restore (Status visible, others hidden)
</verification>

<success_criteria>
- All 5 Success Criteria from roadmap met:
  - SC-1: Toggle visibility via clicking section headers
  - SC-2: Status visible by default; Priority/Category hidden by default
  - SC-3: Active and overdue always at top (unchanged)
  - SC-4 and SC-5: Handled in Plan 02
- No TypeScript errors
- Preferences persist across sessions
</success_criteria>

<output>
After completion, create `.planning/phases/34-tickets-dashboard-enhancements/34-01-SUMMARY.md`
</output>
